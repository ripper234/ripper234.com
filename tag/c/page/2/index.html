<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"  xmlns:fb="http://ogp.me/ns/fb#" xmlns:og="http://ogp.me/ns#" lang="en-US">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>A Quantum Immortal  &raquo; C#</title>

<link rel="stylesheet" href="http://ripper234.wpengine.netdna-cdn.com/wp-content/themes/fluid-blue-categoriless/style.css" type="text/css" media="screen" />
<link rel="stylesheet" href="http://ripper234.wpengine.netdna-cdn.com/wp-content/themes/fluid-blue-categoriless/print.css" type="text/css" media="print" />
<link rel="alternate" type="application/rss+xml" title="A Quantum Immortal RSS Feed" href="http://ripper234.com/feed/" />
<link rel="pingback" href="http://ripper234.com/xmlrpc.php" />
<link rel="icon" type="image/x-icon" href="http://ripper234.wpengine.netdna-cdn.com/favicon.png">

<link rel="alternate" type="application/rss+xml" title="A Quantum Immortal &raquo; C# Tag Feed" href="http://ripper234.com/tag/c/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/ripper234.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.5.3"}};
			!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;if(!g||!g.fillText)return!1;switch(g.textBaseline="top",g.font="600 32px Arial",a){case"flag":return g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3;case"diversity":return g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,d=c[0]+","+c[1]+","+c[2]+","+c[3],g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e;case"simple":return g.fillText(h(55357,56835),0,0),0!==g.getImageData(16,16,1,1).data[0];case"unicode8":return g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='wp-postratings-css'  href='http://ripper234.wpengine.netdna-cdn.com/wp-content/plugins/wp-postratings/postratings-css.css?ver=1.63' type='text/css' media='all' />
<link rel='stylesheet' id='wp-syntax-css-css'  href='http://ripper234.wpengine.netdna-cdn.com/wp-content/plugins/wp-syntax/css/wp-syntax.css?ver=1.0' type='text/css' media='all' />
<script type='text/javascript' src='http://ripper234.wpengine.netdna-cdn.com/wp-content/plugins/wp-plus-one/wp-plus-one.js?ver=4.5.3'></script>
<script type='text/javascript' src='//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js'></script>
<script type='text/javascript'>try{jQuery.noConflict();}catch(e){};</script>
<script type='text/javascript' src='http://ripper234.wpengine.netdna-cdn.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript' src='http://www.google.com/jsapi?ver=4.5.3'></script>
<script type='text/javascript' src='http://platform.twitter.com/anywhere.js?id=RtEPLcQgDog7UFzqlmWHrg&#038;v=1'></script>
<script type='text/javascript' src='http://ripper234.wpengine.netdna-cdn.com/wp-content/plugins/google-analyticator/external-tracking.min.js?ver=6.4.7.3'></script>
<link rel='https://api.w.org/' href='http://ripper234.com/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://ripper234.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://ripper234.com/wp-includes/wlwmanifest.xml" /> 
<meta property='og:site_name' content='A Quantum Immortal' />
<meta property='fb:app_id' content='125818707482670' />
<meta property='og:locale' content='en_US' />
<meta http-equiv="X-XRDS-Location" content="http://ripper234.com/?xrds" />
<meta http-equiv="X-Yadis-Location" content="http://ripper234.com/?xrds" />
		<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
		<!-- Google Analytics Tracking by Google Analyticator 6.4.7.3: http://www.videousermanuals.com/google-analyticator/ -->
<script type="text/javascript">
                var analyticsFileTypes = [''];
                            var analyticsSnippet = 'enabled';
                var analyticsEventTracking = 'enabled';
            </script>
<script type="text/javascript">
	var _gaq = _gaq || [];
  
	_gaq.push(['_setAccount', 'UA-3992244-2']);
    _gaq.push(['_addDevId', 'i9k95']); // Google Analyticator App ID with Google
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
</head>

<body>
<div id="page">
<div id="header">
	<div id="headertitle">
		<h1><a href="http://ripper234.com" title="A Quantum Immortal: Stuff Ron Gross Finds Interesting">A Quantum Immortal</a></h1>
		<p>Ron Gross' blog 2007-2015</p>
	</div> 
	<!-- Search box (If you prefer having search form as a sidebar widget, remove this block) -->
	<div class="search">
		<form method="get" id="searchform" action="http://ripper234.com/">
<input type="text" size="20" name="s" id="s" value="Search..."  onblur="if(this.value=='') this.value='Search...';" onfocus="if(this.value=='Search...') this.value='';"/>
</form>
	</div> 
	<!-- Search ends here-->
		
</div>

<div id="hmenu">
<ul>
	<li class="hmenu1"><a href="http://ripper234.com">Home</a></li>
	<li class="page_item page-item-205"><a href="http://ripper234.com/about/">About</a></li>
<li class="page_item page-item-488"><a href="http://ripper234.com/feedback/">Feedback</a></li>
<li class="page_item page-item-835 page_item_has_children"><a href="http://ripper234.com/magic/">Magic</a></li>
<li class="page_item page-item-781"><a href="http://ripper234.com/plugins/">Plugins</a></li>
</ul>
</div>
<div id="wrapper">

	<div id="content"><div class="mediumredirect"><font size="8"><p><strong>This blog has moved to <a href="https://medium.com/@ripper234">Medium</a></strong></p><p>Subscribe <a href="https://tinyletter.com/ripper234">via email</a></p></font><br/></div>

	<div id="post-ratings-" class="post-ratings" data-nonce="1fa7fad55a"><img id="rating__1" src="http://ripper234.wpengine.netdna-cdn.com/wp-content/plugins/wp-postratings/images/squares/rating_off.gif" alt="1 Star" title="1 Star" onmouseover="current_rating(, 1, '1 Star');" onmouseout="ratings_off(0, 0, 0);" onclick="rate_post();" onkeypress="rate_post();" style="cursor: pointer; border: 0px;" /><img id="rating__2" src="http://ripper234.wpengine.netdna-cdn.com/wp-content/plugins/wp-postratings/images/squares/rating_off.gif" alt="2 Stars" title="2 Stars" onmouseover="current_rating(, 2, '2 Stars');" onmouseout="ratings_off(0, 0, 0);" onclick="rate_post();" onkeypress="rate_post();" style="cursor: pointer; border: 0px;" /><img id="rating__3" src="http://ripper234.wpengine.netdna-cdn.com/wp-content/plugins/wp-postratings/images/squares/rating_off.gif" alt="3 Stars" title="3 Stars" onmouseover="current_rating(, 3, '3 Stars');" onmouseout="ratings_off(0, 0, 0);" onclick="rate_post();" onkeypress="rate_post();" style="cursor: pointer; border: 0px;" /><img id="rating__4" src="http://ripper234.wpengine.netdna-cdn.com/wp-content/plugins/wp-postratings/images/squares/rating_off.gif" alt="4 Stars" title="4 Stars" onmouseover="current_rating(, 4, '4 Stars');" onmouseout="ratings_off(0, 0, 0);" onclick="rate_post();" onkeypress="rate_post();" style="cursor: pointer; border: 0px;" /><img id="rating__5" src="http://ripper234.wpengine.netdna-cdn.com/wp-content/plugins/wp-postratings/images/squares/rating_off.gif" alt="5 Stars" title="5 Stars" onmouseover="current_rating(, 5, '5 Stars');" onmouseout="ratings_off(0, 0, 0);" onclick="rate_post();" onkeypress="rate_post();" style="cursor: pointer; border: 0px;" /> (No Ratings Yet)<br /><span class="post-ratings-text" id="ratings__text"></span></div>
<div id="post-ratings--loading"  class="post-ratings-loading"><img src="http://ripper234.wpengine.netdna-cdn.com/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" alt="Loading ..." title="Loading ..." class="post-ratings-image" />&nbsp;Loading ...</div>
			<p>Posts tagged &#8216;C#&#8217;</p>

	 		
		<div class="navigation">
			<div class="alignleft"><a href="http://ripper234.com/tag/c/page/3/" >&laquo; Previous Entries</a></div>
			<div class="alignright"><a href="http://ripper234.com/tag/c/" >Next Entries &raquo;</a></div>
		</div>

						
			<div class="post" id="post-907">
				<h2 class="posttitle"><a href="http://ripper234.com/p/playing-with-a-few-readerwriterlocks-in-net/" rel="bookmark" title="Permanent Link to Playing with a few ReaderWriterLocks in .Net">Playing with a few ReaderWriterLocks in .Net</a></h2>
				<div class="postmetadata">28/1/09, 12:17 <!-- by ripper234 --></div>
				<div class="postentry">
					<div class="fblikebutton_button" style="margin-bottom: 10px; display: block;"><iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fripper234.com%2Fp%2Fplaying-with-a-few-readerwriterlocks-in-net%2F&amp;layout=standard&amp;show-faces=true&amp;width=450&amp;action=like&amp;colorscheme=light" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:450px; height:26px"></iframe></div>
<p>With <a href="http://delver.com/">Delver</a>&#8216;s future <a href="http://www.techcrunch.com/2009/01/22/social-search-engine-delver-on-death-watch/">clouded by a big question mark</a>, I&#8217;m looking for a new job. This reminded me of my previous job hunt, and the part we all &#8220;love&#8221; about it &#8211; job interviews.</p>
<p>Last year, two companies I was interviewing for asked me to implement a <a href="http://en.wikipedia.org/wiki/Readers-writer_lock">ReaderWriterLock</a>. It took me more time than I&#8217;d hoped, but I got the implementation done. Since this was one of the hardest interview questions (for me at least), I&#8217;ve decided to implement one or two versions, and to test the performance vs the built-in reader writer locks available in .NET.</p>
<p>First, I wrote the test code, which is roughly composed of:</p>
<ol>
<li> Shared (singleton) counters object with two counters, X &amp; Y.</li>
<li>Some reader threads. When a reader reads, it reads both X &amp; Y and makes sure they are equal.</li>
<li>Some writer threads, that increment X &amp; Y together (thus maintaining X == Y).</li>
</ol>
<p>Then, I tested this setup without any locks, and as expected the reader threads got different values of X &amp; Y.</p>
<p>Next, I implemented the following locks:</p>
<ol>
<li>DummyReaderWriterLock &#8211; a horribly inefficient implementation that is reader/writer-oblivious. It just locks the object regardless of reads/writes.</li>
<li>SemaphoreReaderWriterLock &#8211; already a huge improvment, this locks uses a <a href="http://en.wikipedia.org/wiki/Semaphore_(programming)">semphore</a> that holds some large number (~2000) locks. Each reader requests only a single lock from the semaphore, and a writer must obtain ALL locks before continuing. Two writers are prevented from deadlocking by a separate Mutex. One immediate problem with this lock is writer starvation. For a writer to obtain the lock, it must first get the mutex and then all locks in the semaphore. This means a single writer is competing against all readers for the semaphore.</li>
<li>EventReaderWriterLock &#8211; implemented by two events and a reader count. The first reader &amp; all writers must get signaled in order to get the lock. Once any reader got the lock, other readers are free to enter without blocking. The last reader out is responsible for signaling the event and letting other writers or readers back in.</li>
</ol>
<p>I also pulled my team leader <a href="http://lnbogen.com/">Oren</a> into this problem, and he came up with a state based <a href="http://www.lnbogen.com/2009/01/28/ReaderWriterLockMyNaiveImplementation.aspx">implementation</a> &#8211; not that far from my own, with an additional &#8220;state&#8221; integer that represents whether the lock is in &#8220;writing mode&#8221;, &#8220;reading mode&#8221; or free. He also added a few TestAndCompare hacks for checking the state.</p>
<p>Finally, I tested the performance of these locks vs two locks that are availble in .NET 3.5: <a href="http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlock.aspx">ReaderWriterLock</a> and <a href="http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx">ReaderWriterLockSlim</a>. I only tested only one scenario, but was pleasantly surprised to discover the performance of both my EventReaderWriterLock and Oren&#8217;s StateReaderWriterLock were identical to that of ReaderWriterLockSlim, and better than ReaderWriterLock! (The performance of DummyReaderWriterLock were literally off the charts).</p>
<p><img class="size-full wp-image-914" title="ReaderWriterLock Performance" src="http://ripper234.wpengine.netdna-cdn.com/wp-content/uploads/2009/01/RWLocksPerformance.png" alt="ReaderWriterLock Performance" width="686" height="407" /></p>
<p>Here is my implementation:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family:monospace;">    <span style="color: #008080; font-style: italic;">/// </span>
    <span style="color: #008080; font-style: italic;">/// A ReaderWriter lock implemented by events.</span>
    <span style="color: #008080; font-style: italic;">///</span>
&nbsp;
    <span style="color: #008080; font-style: italic;">/// An AutoReset event that gives ownership of the lock either to one writer or to all the readers.</span>
    <span style="color: #008080; font-style: italic;">/// A manual reset event that allows readers to enter, and is only reset when the last reader finishes</span>
    <span style="color: #008080; font-style: italic;">/// </span>
    <span style="color: #008080; font-style: italic;">/// </span>
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> EventReaderWriterLock <span style="color: #008000;">:</span> IDisposable
    <span style="color: #008000;">&#123;</span>
        <span style="color: #008080; font-style: italic;">/// </span>
        <span style="color: #008080; font-style: italic;">/// Both readers and writer need this lock to work</span>
        <span style="color: #008080; font-style: italic;">/// </span>
        <span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #0600FF; font-weight: bold;">readonly</span> AutoResetEvent _lockAvailble <span style="color: #008000;">=</span> <span style="color: #008000;">new</span> AutoResetEvent<span style="color: #008000;">&#40;</span><span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
        <span style="color: #008080; font-style: italic;">/// </span>
        <span style="color: #008080; font-style: italic;">/// Further readers beyond the first one wait on this object</span>
        <span style="color: #008080; font-style: italic;">/// </span>
        <span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #0600FF; font-weight: bold;">readonly</span> ManualResetEvent _canReadEvent <span style="color: #008000;">=</span> <span style="color: #008000;">new</span> ManualResetEvent<span style="color: #008000;">&#40;</span><span style="color: #0600FF; font-weight: bold;">false</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
        <span style="color: #008080; font-style: italic;">/// </span>
        <span style="color: #008080; font-style: italic;">/// Used to synch the reader lock/release</span>
        <span style="color: #008080; font-style: italic;">/// </span>
        <span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #0600FF; font-weight: bold;">readonly</span> <span style="color: #6666cc; font-weight: bold;">object</span> _readerLock <span style="color: #008000;">=</span> <span style="color: #008000;">new</span> <span style="color: #6666cc; font-weight: bold;">object</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
        <span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #6666cc; font-weight: bold;">int</span> _readers<span style="color: #008000;">;</span>
&nbsp;
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> LockReader<span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
        <span style="color: #008000;">&#123;</span>
            <span style="color: #0600FF; font-weight: bold;">lock</span> <span style="color: #008000;">&#40;</span>_readerLock<span style="color: #008000;">&#41;</span>
            <span style="color: #008000;">&#123;</span>
                <span style="color: #6666cc; font-weight: bold;">int</span> oldReaders <span style="color: #008000;">=</span> _readers<span style="color: #008000;">++;</span>
                <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>oldReaders <span style="color: #008000;">==</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span>
                <span style="color: #008000;">&#123;</span>
                    <span style="color: #008080; font-style: italic;">// I'm the first reader, let's fight for the lock with the writers</span>
                    _lockAvailble<span style="color: #008000;">.</span><span style="color: #0000FF;">WaitOne</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
                    <span style="color: #008080; font-style: italic;">// got lock, notify all other readers they can read</span>
                    _canReadEvent<span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Set</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
                <span style="color: #008000;">&#125;</span>
                <span style="color: #0600FF; font-weight: bold;">else</span>
                <span style="color: #008000;">&#123;</span>
                    <span style="color: #008080; font-style: italic;">// wait for the first reader to signal me</span>
                    _canReadEvent<span style="color: #008000;">.</span><span style="color: #0000FF;">WaitOne</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
                <span style="color: #008000;">&#125;</span>
            <span style="color: #008000;">&#125;</span>
        <span style="color: #008000;">&#125;</span>
&nbsp;
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> ReleaseReader<span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
        <span style="color: #008000;">&#123;</span>
            <span style="color: #0600FF; font-weight: bold;">lock</span> <span style="color: #008000;">&#40;</span>_readerLock<span style="color: #008000;">&#41;</span>
            <span style="color: #008000;">&#123;</span>
                <span style="color: #6666cc; font-weight: bold;">int</span> oldReaders <span style="color: #008000;">=</span> _readers<span style="color: #008000;">--;</span>
                <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>oldReaders <span style="color: #008000;">!=</span> <span style="color: #FF0000;">1</span><span style="color: #008000;">&#41;</span>
                <span style="color: #008000;">&#123;</span>
                    <span style="color: #008080; font-style: italic;">// If I'm not the last reader, I do nothing here</span>
                    <span style="color: #0600FF; font-weight: bold;">return</span><span style="color: #008000;">;</span>
                <span style="color: #008000;">&#125;</span>
&nbsp;
                <span style="color: #008080; font-style: italic;">// I'm the last, let's forbid other readers but allow writers or a first reader.</span>
                _canReadEvent<span style="color: #008000;">.</span><span style="color: #0000FF;">Reset</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
                _lockAvailble<span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Set</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
            <span style="color: #008000;">&#125;</span>
        <span style="color: #008000;">&#125;</span>
&nbsp;
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> LockWriter<span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
        <span style="color: #008000;">&#123;</span>
            _lockAvailble<span style="color: #008000;">.</span><span style="color: #0000FF;">WaitOne</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #008000;">&#125;</span>
&nbsp;
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> ReleaseWriter<span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
        <span style="color: #008000;">&#123;</span>
            _lockAvailble<span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Set</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #008000;">&#125;</span>
&nbsp;
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> Dispose<span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
        <span style="color: #008000;">&#123;</span>
            _lockAvailble<span style="color: #008000;">.</span><span style="color: #0000FF;">Close</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
            _canReadEvent<span style="color: #008000;">.</span><span style="color: #0000FF;">Close</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #008000;">&#125;</span>
    <span style="color: #008000;">&#125;</span></pre></td></tr></table></div>

<p>And the <a href="/apps/ReaderWritererLock.zip">entire zip</a> with the other RWLocks and test harness.</p>
<p>A few immediate conclusions:</p>
<ol>
<li>Writing a <strong>working</strong> reader writer lock is a very non-trivial problem for a job interview &#8211; but watching an applicant struggle with it can give you insights about his know-how around multi-threaded code.</li>
<li>Writing an all-purpose RWLock seems like a daunting task. In my exercise I specifically avoided broad considerations such as fairness &amp; readers upgrading to writers. Testing it for all end cases seems almost impossible (though some formal theoretical tools exists for such correction proofs)</li>
<li>At least for some problems, writing your own lean solution can be better (performance wise) than relying on the de facto standard. While our solutions weren&#8217;t better than ReaderWriterLockSlim, they were significantly better than ReaderWriterLock &#8211; again, <span style="text-decoration: underline;">only in the context of this test harness</span>.</li>
</ol>
<p><strong>Bonus:</strong> my first implementation didn&#8217;t have a lock statement in LockReader() and ReleaseReader(), and used Interlocked.Increment() and Decrement()  to update the _readers variable. Still, it contained a hidden bug &#8211; can you find it, and understand why the lock is necessary?</p>
				</div>
		
				<div class="postmetadata">
					Tags: <a href="http://ripper234.com/tag/net/" rel="tag">.net</a>, <a href="http://ripper234.com/tag/c/" rel="tag">C#</a>, <a href="http://ripper234.com/tag/delver/" rel="tag">Delver</a>, <a href="http://ripper234.com/tag/programming/" rel="tag">Programming</a>, <a href="http://ripper234.com/tag/readerwriterlock/" rel="tag">ReaderWriterLock</a>, <a href="http://ripper234.com/tag/threading/" rel="tag">Threading</a><br /><!--					Category: <a href="http://ripper234.com/p/category/uncategorized/" rel="category tag">Uncategorized</a>&nbsp;&nbsp;|&nbsp; !-->
					<a href="http://ripper234.com/p/playing-with-a-few-readerwriterlocks-in-net/#comments">2 Comments</a>									 </div>
			</div>
	
						
			<div class="post" id="post-872">
				<h2 class="posttitle"><a href="http://ripper234.com/p/reading-enviornment-variables-from-external-processes-in-c/" rel="bookmark" title="Permanent Link to Reading enviornment variables from external processes in C#">Reading enviornment variables from external processes in C#</a></h2>
				<div class="postmetadata">14/1/09, 11:11 <!-- by ripper234 --></div>
				<div class="postentry">
					<div class="fblikebutton_button" style="margin-bottom: 10px; display: block;"><iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fripper234.com%2Fp%2Freading-enviornment-variables-from-external-processes-in-c%2F&amp;layout=standard&amp;show-faces=true&amp;width=450&amp;action=like&amp;colorscheme=light" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:450px; height:26px"></iframe></div>
<p>I was trying to discern which of 3 java processes is our Tomcat process, to kill rouge Tomcats in our unit tests. We have code that uses Process.GetProcessesByName(), and checks the returned StartInfo.</p>
<p>Apparently, <a href="http://social.microsoft.com/Forums/en-US/netfxbcl/thread/e7536183-ae65-4abc-a457-223dfa0dfbee">Process.GetProcess() returns empty StartInfo</a>.</p>
<p>Digging around, I failed to find a ready-out-of-the-box way to do this. This <a href="http://stackoverflow.com/questions/217951/get-the-current-working-directory-for-cmdexe">StackOverflow article</a> pointed me in the right direction of <a href="http://www.codeproject.com/KB/threads/ReadProcEnv.aspx">this CodeProject page</a>.</p>
<p>My <a href="http://ripper234.com/apps/ReadProcessEnv.zip">final result</a> includes:</p>
<ol>
<li>A small utility that reads either all enviornment variables from some process, or a specific one.</li>
<li>A small C# wrapper</li>
</ol>
<p>Here is the usage:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">string</span> GetJavaWorkingDir<span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> pid<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
  <span style="color: #6666cc; font-weight: bold;">string</span> processEnvReader <span style="color: #008000;">=</span> <span style="color: #666666;">@&quot;Scripts\ReadProcessEnv\bin\ReadProcessEnv.exe&quot;</span><span style="color: #008000;">;</span>
  ProcessEnvReader reader <span style="color: #008000;">=</span> <span style="color: #008000;">new</span> ProcessEnvReader<span style="color: #008000;">&#40;</span>processEnvReader<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
  <span style="color: #0600FF; font-weight: bold;">return</span> reader<span style="color: #008000;">.</span><span style="color: #0000FF;">Read</span><span style="color: #008000;">&#40;</span>pid, <span style="color: #666666;">&quot;catalina_base&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre></td></tr></table></div>

				</div>
		
				<div class="postmetadata">
					Tags: <a href="http://ripper234.com/tag/c/" rel="tag">C#</a>, <a href="http://ripper234.com/tag/external-processes/" rel="tag">external processes</a>, <a href="http://ripper234.com/tag/getjavaworkingdir/" rel="tag">GetJavaWorkingDir</a>, <a href="http://ripper234.com/tag/getprocess/" rel="tag">GetProcess</a>, <a href="http://ripper234.com/tag/java/" rel="tag">Java</a>, <a href="http://ripper234.com/tag/processenvreader/" rel="tag">processEnvReader</a>, <a href="http://ripper234.com/tag/programming/" rel="tag">Programming</a>, <a href="http://ripper234.com/tag/readprocessenv/" rel="tag">ReadProcessEnv</a>, <a href="http://ripper234.com/tag/startinfo/" rel="tag">StartInfo</a>, <a href="http://ripper234.com/tag/tomcat/" rel="tag">Tomcat</a><br /><!--					Category: <a href="http://ripper234.com/p/category/uncategorized/" rel="category tag">Uncategorized</a>&nbsp;&nbsp;|&nbsp; !-->
					<span>Comments Off<span class="screen-reader-text"> on Reading enviornment variables from external processes in C#</span></span>									 </div>
			</div>
	
						
			<div class="post" id="post-811">
				<h2 class="posttitle"><a href="http://ripper234.com/p/the-shorter-the-better/" rel="bookmark" title="Permanent Link to The shorter the better">The shorter the better</a></h2>
				<div class="postmetadata">24/12/08, 21:15 <!-- by ripper234 --></div>
				<div class="postentry">
					<div class="fblikebutton_button" style="margin-bottom: 10px; display: block;"><iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fripper234.com%2Fp%2Fthe-shorter-the-better%2F&amp;layout=standard&amp;show-faces=true&amp;width=450&amp;action=like&amp;colorscheme=light" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:450px; height:26px"></iframe></div>
<p>I wrote <a href="http://ripper234.com/p/11-tips-for-beginner-c-developers/">in a previous</a> post about a few refactorings meant to eliminate code duplication. I was <a href="http://stackoverflow.com/questions/296056/how-fanatically-do-you-eliminate-code-duplication">reminded recently</a> this principle has a name &#8211; DRY, which stands for <a href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself">Don&#8217;t Repeat Yourself</a>, and should be applied everywhere.</p>
<p>Eliminating duplication, while a noble task, is not the only refactoring one should practice and apply. Breaking up large pieces of code into exceedingly smaller pieces is also important. It makes your code more readable to yourself and to other developers, and also make merges much easier to accomplish &#8211; nothing is more terrible than looking at a huge merge of a huge method or class and having to guess what combination of the versions is the correct one.</p>
<p>Here are a couple of important tips/techniques to make your code more manageable:</p>
<p><strong>Tip I &#8211; Group expression into methods</strong></p>
<p>It doesn&#8217;t matter if it&#8217;s code you wrote or <a href="http://stumbleupon.com">stumbled on</a>. Whenever you get the chance, select a few statements in a long method, use Resharper&#8217;s Extract Method refactoring, invent some name to describe what this group of statements does, and voila &#8211; you&#8217;ve shortened the original method. It&#8217;s easier to understand and maintain, and now the new method can be called and tested on its own. This technique can turn huge 200-line monster methods into responsible, comprehensible 15-liners.</p>
<p>Ideally you&#8217;d want to use this refactoring on a bunch of statements that actually have a logical cohesive meaning together. Even if that&#8217;s not the case, usually you&#8217;ll be better off with the extracted method. One notable exception &#8211; when the set of statements you&#8217;d refactor will lead to a method will multiple out parameters. Then you&#8217;d still have to declare these variables in the calling code, and your gain greatly diminishes.</p>
<p><strong>Tip II &#8211; Group methods into classes</strong></p>
<p>You&#8217;ve all seen the huge classes with dozens of methods. Hell, Tip 1 above is all about creating even more methods! Well, once you feel a class has grown too much, you should try to spot groups of methods that have related functionality. Perhaps most methods in the group are used only by a single method, but nowhere else. In this case, if you move all these methods away to a new class and make them private members of that class, their absense will certainly not be missed in the original class &#8211; it only uses the one method anyway (be sure to keep it public, of course). Like in the previous tip, you want to try and find groups of methods that have a common logical function in order to use this refactoring. However, even if you can&#8217;t find a common function to these methods, they will still be better off in another class.</p>
<p>While Resharper does have a Move Method refactoring, in some cases it&#8217;s better to just cut and paste, especially when you move a bunch of methods together, with the data members they use and all.</p>
<p><strong>Tip III &#8211; Reduce nesting level</strong></p>
<p>This will not shrink your methods by a lot, but it will make them more managable. Nesting level implies context, which you have to maintain in your head when you are processing code. When is this code called? Only if 5 different if statements happen to succeed. It&#8217;s painful on the eye.</p>
<p>A useful refactoring for this is Resharper&#8217;s &#8220;Invert If&#8221;. It takes a convoluted piece of code such as</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> ProcessUserInput<span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> name<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
   <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>name <span style="color: #008000;">!=</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">&#41;</span>
   <span style="color: #008000;">&#123;</span>
      <span style="color: #6666cc; font-weight: bold;">int</span> id <span style="color: #008000;">=</span> FindIdByName<span style="color: #008000;">&#40;</span>name<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
      <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>id <span style="color: #008000;">!=</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span>
      <span style="color: #008000;">&#123;</span>
         <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>TryToStoreName<span style="color: #008000;">&#40;</span>name, id<span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span>
         <span style="color: #008000;">&#123;</span>
            Console<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span><span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;Stored {0}, {1}&quot;</span>, name, id<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
         <span style="color: #008000;">&#125;</span>
      <span style="color: #008000;">&#125;</span>
   <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre></td></tr></table></div>

<p>And beautifies it into</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> ProcessUserInput<span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> name<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
   <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>name <span style="color: #008000;">==</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">&#41;</span> <span style="color: #0600FF; font-weight: bold;">return</span><span style="color: #008000;">;</span>
&nbsp;
   <span style="color: #6666cc; font-weight: bold;">int</span> id <span style="color: #008000;">=</span> FindIdByName<span style="color: #008000;">&#40;</span>name<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
   <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>id <span style="color: #008000;">==</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span> <span style="color: #0600FF; font-weight: bold;">return</span><span style="color: #008000;">;</span>
&nbsp;
   <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>TryToStoreName<span style="color: #008000;">&#40;</span>name, id<span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span>
   <span style="color: #008000;">&#123;</span>
      Console<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span><span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;Stored {0}, {1}&quot;</span>, name, id<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
   <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre></td></tr></table></div>

<p>Much easier to follow (the difference is highly evident in methods with 5 nesting levels or more &#8211; these acutely need this refactoring).</p>
				</div>
		
				<div class="postmetadata">
					Tags: <a href="http://ripper234.com/tag/c/" rel="tag">C#</a>, <a href="http://ripper234.com/tag/dry/" rel="tag">DRY</a>, <a href="http://ripper234.com/tag/programming/" rel="tag">Programming</a>, <a href="http://ripper234.com/tag/refactoring/" rel="tag">Refactoring</a>, <a href="http://ripper234.com/tag/resharper/" rel="tag">Resharper</a><br /><!--					Category: <a href="http://ripper234.com/p/category/uncategorized/" rel="category tag">Uncategorized</a>&nbsp;&nbsp;|&nbsp; !-->
					<a href="http://ripper234.com/p/the-shorter-the-better/#comments">2 Comments</a>									 </div>
			</div>
	
						
			<div class="post" id="post-710">
				<h2 class="posttitle"><a href="http://ripper234.com/p/globalizing-datetime-tryparse/" rel="bookmark" title="Permanent Link to Globalizing DateTime.TryParse()">Globalizing DateTime.TryParse()</a></h2>
				<div class="postmetadata">31/10/08, 17:53 <!-- by ripper234 --></div>
				<div class="postentry">
					<div class="fblikebutton_button" style="margin-bottom: 10px; display: block;"><iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fripper234.com%2Fp%2Fglobalizing-datetime-tryparse%2F&amp;layout=standard&amp;show-faces=true&amp;width=450&amp;action=like&amp;colorscheme=light" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:450px; height:26px"></iframe></div>
<p>DateTime.TryParse() is the sane method in .NET to parse date strings (don&#8217;t use Date.Parse() &#8211; you want to handle bad user input correctly, and throwing exceptions usually isn&#8217;t the correct way, especially if all you want is to just skip the bad date field). Well, I&#8217;ve just discovered yesterday that the dates it returns are in the local computer time. If you try to parse &#8220;31/12/08 23:59:59&#8221; and you happen to be in GMT+2, the time you&#8217;ll get will be 2 hours off.</p>
<p>To solve, simply run ToUniversal() on the resulting DateTime. I use:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">bool</span> TryParseUniversal<span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> dateString, <span style="color: #0600FF; font-weight: bold;">out</span> DateTime date<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
  <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">!</span>DateTime<span style="color: #008000;">.</span><span style="color: #0000FF;">TryParse</span><span style="color: #008000;">&#40;</span>dateString, <span style="color: #0600FF; font-weight: bold;">out</span> date<span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">false</span><span style="color: #008000;">;</span>
&nbsp;
  date <span style="color: #008000;">=</span> date<span style="color: #008000;">.</span><span style="color: #0000FF;">ToUniversal</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
  <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre></td></tr></table></div>

				</div>
		
				<div class="postmetadata">
					Tags: <a href="http://ripper234.com/tag/net/" rel="tag">.net</a>, <a href="http://ripper234.com/tag/c/" rel="tag">C#</a>, <a href="http://ripper234.com/tag/datetime/" rel="tag">DateTime</a>, <a href="http://ripper234.com/tag/gmt/" rel="tag">GMT</a>, <a href="http://ripper234.com/tag/parsing/" rel="tag">Parsing</a>, <a href="http://ripper234.com/tag/programming/" rel="tag">Programming</a>, <a href="http://ripper234.com/tag/touniversaltime/" rel="tag">ToUniversalTime</a>, <a href="http://ripper234.com/tag/tryparseuniversal/" rel="tag">TryParseUniversal</a><br /><!--					Category: <a href="http://ripper234.com/p/category/uncategorized/" rel="category tag">Uncategorized</a>&nbsp;&nbsp;|&nbsp; !-->
					<span>Comments Off<span class="screen-reader-text"> on Globalizing DateTime.TryParse()</span></span>									 </div>
			</div>
	
						
			<div class="post" id="post-684">
				<h2 class="posttitle"><a href="http://ripper234.com/p/a-good-question/" rel="bookmark" title="Permanent Link to A Good Question">A Good Question</a></h2>
				<div class="postmetadata">19/9/08, 22:31 <!-- by ripper234 --></div>
				<div class="postentry">
					<div class="fblikebutton_button" style="margin-bottom: 10px; display: block;"><iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fripper234.com%2Fp%2Fa-good-question%2F&amp;layout=standard&amp;show-faces=true&amp;width=450&amp;action=like&amp;colorscheme=light" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:450px; height:26px"></iframe></div>
<p>C# programmers &#8211; you should read <a href="http://stackoverflow.com/questions/9033/hidden-features-of-c">this question</a> and its many answers, I&#8217;m sure you&#8217;ll learn a thing or two. For example, <a href="http://msdn.microsoft.com/en-us/library/system.threadstaticattribute%28VS.71%29.aspx">ThreadStaticAttribute</a> &#8211; a clean, type-safe way to get thread local storage in C#.</p>
				</div>
		
				<div class="postmetadata">
					Tags: <a href="http://ripper234.com/tag/c/" rel="tag">C#</a>, <a href="http://ripper234.com/tag/programming/" rel="tag">Programming</a>, <a href="http://ripper234.com/tag/questions/" rel="tag">Questions</a>, <a href="http://ripper234.com/tag/stackoverflow/" rel="tag">Stackoverflow</a><br /><!--					Category: <a href="http://ripper234.com/p/category/uncategorized/" rel="category tag">Uncategorized</a>&nbsp;&nbsp;|&nbsp; !-->
					<span>Comments Off<span class="screen-reader-text"> on A Good Question</span></span>									 </div>
			</div>
	
						
			<div class="post" id="post-681">
				<h2 class="posttitle"><a href="http://ripper234.com/p/unhandled-exceptions-crash-net-threads/" rel="bookmark" title="Permanent Link to Unhandled Exceptions Crash .NET Threads">Unhandled Exceptions Crash .NET Threads</a></h2>
				<div class="postmetadata">9/9/08, 12:53 <!-- by ripper234 --></div>
				<div class="postentry">
					<div class="fblikebutton_button" style="margin-bottom: 10px; display: block;"><iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fripper234.com%2Fp%2Funhandled-exceptions-crash-net-threads%2F&amp;layout=standard&amp;show-faces=true&amp;width=450&amp;action=like&amp;colorscheme=light" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:450px; height:26px"></iframe></div>
<p>A little something I learned at <a href="http://en.wikipedia.org/wiki/Stand-up_meeting">DSM</a> today. It appears if any thread in .NET crashes (lets a thrown exception fly through the top stack level), the process crashes. I refused to believe at first, but testing on .NET 2.0 showed it to be true:</p>
<p>(I should really switch to another blog platform, I didn&#8217;t find a decent way to write code in Blogspot).</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">class</span> ThreadCrashTest
<span style="color: #008000;">&#123;</span>
  <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">void</span> Main<span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
  <span style="color: #008000;">&#123;</span>
    <span style="color: #008000;">new</span> Thread<span style="color: #008000;">&#40;</span>Foo<span style="color: #008000;">&#41;</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Start</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #0600FF; font-weight: bold;">for</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> i <span style="color: #008000;">=</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">;</span> i <span style="color: #008000;">&lt;</span> <span style="color: #FF0000;">10</span><span style="color: #008000;">;</span> <span style="color: #008000;">++</span>i<span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
      Console<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span><span style="color: #008000;">&#40;</span>i<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
      Thread<span style="color: #008000;">.</span><span style="color: #0000FF;">Sleep</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">100</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
  <span style="color: #008000;">&#125;</span>
&nbsp;
  <span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">void</span> Foo<span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
  <span style="color: #008000;">&#123;</span>
    Console<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span><span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;Crashing&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #0600FF; font-weight: bold;">throw</span> <span style="color: #008000;">new</span> Exception<span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
  <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre></td></tr></table></div>

<p>According to Yan, the behavior on .NET 3 is to crash the AppDomain instead of the entire process.</p>
				</div>
		
				<div class="postmetadata">
					Tags: <a href="http://ripper234.com/tag/c/" rel="tag">C#</a>, <a href="http://ripper234.com/tag/crash/" rel="tag">Crash</a>, <a href="http://ripper234.com/tag/programming/" rel="tag">Programming</a>, <a href="http://ripper234.com/tag/threading/" rel="tag">Threading</a><br /><!--					Category: <a href="http://ripper234.com/p/category/uncategorized/" rel="category tag">Uncategorized</a>&nbsp;&nbsp;|&nbsp; !-->
					<span>Comments Off<span class="screen-reader-text"> on Unhandled Exceptions Crash .NET Threads</span></span>									 </div>
			</div>
	
						
			<div class="post" id="post-679">
				<h2 class="posttitle"><a href="http://ripper234.com/p/11-tips-for-beginner-c-developers/" rel="bookmark" title="Permanent Link to 11 Tips for Beginner C# Developers">11 Tips for Beginner C# Developers</a></h2>
				<div class="postmetadata">8/9/08, 23:29 <!-- by ripper234 --></div>
				<div class="postentry">
					<div class="fblikebutton_button" style="margin-bottom: 10px; display: block;"><iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fripper234.com%2Fp%2F11-tips-for-beginner-c-developers%2F&amp;layout=standard&amp;show-faces=true&amp;width=450&amp;action=like&amp;colorscheme=light" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:450px; height:26px"></iframe></div>
<p>Today I sat with a friend (let&#8217;s call him Joe), who just switched from a job in QA to programming, and passed on to him some of the little tips and tricks I learned over the years. I&#8217;m sharing it here because I thought it could be useful to other people that are new to programming. The focus of this post is C#, but analogous tools and methods exist for other languages of course.</p>
<h2>Refactorings (A.K.A Resharper)</h2>
<p>(This is just a short introduction. I recommend the book <a href="http://www.amazon.com/Refactoring-Improving-Existing-Addison-Wesley-Technology/dp/0201485672">Refactoring: Improving the Design of Existing Code</a> as further reading)</p>
<p><a href="http://qimmortal.blogspot.com/2008/08/addicted-to-resharper.html">As I&#8217;ve written here before</a>, I just love Resharper. It is the best refactoring tool for C# I know of (even though it&#8217;s a bit heavy sometimes &#8211; make sure to get enough RAM and a strong CPU). Joe asked me about a C# feature called partial classes. He said his class was just too big (4000 lines) and becoming unmanageable, and he wanted some way to break it to smaller pieces. He also said that at his workplace, they lock the file whenever anyone edits it, because it&#8217;s very hard to avoid merge conflicts on such huge files.</p>
<p>I was happy he wanted to simplify and clarify his code by splitting the file, but the way he thought of doing this was the wrong way.</p>
<p><span style="font-size:130%;"><b>Tip I</b>: Single Responsibility and Information Hiding</span></p>
<p>You should strive to minimize the information you require at place in your program. Joe had dozens of unit tests, which all derived from a single base class that contain methods required for all the tests. In a second look, we saw that some of the methods were in fact only needed by some subset of the tests, that were actually logically close.</p>
<p>To solve Joe&#8217;s problem, we created an intermediate class, which inherited from the common test base class, and changed these classes to inherit from the intermediate class. We then used Resharper&#8217;s <b>Push Down Member</b> refactoring, which removed the methods from the test base class into the intermediate class. No functionality was changed, but we removed code from the huge 4000 lines class! By continuing this process, we can break down the huge class into separate related classes with Single Responsibilities, and no class would have access to uneeded information (like methods it doesn&#8217;t care about).</p>
<p><span style="font-size:130%;"><b>Tip II</b> &#8211; Duplicate Code Elimination</span></p>
<p>I believe the world of software would be a better place if people were not allowed to Copy-Paste code more than a few times a day. Many coders abuse this convenient shortcut and thus create unmaintainable code. The effective counter-measure to the Copy-Paste plague is elimination of duplicate code.</p>
<p>I saw in Joe&#8217;s long file code that looked similar to this:<br />
<blockquote>alice = Configuration.Instance.GetUsers(&#8220;alice&#8221;);<br />bob = Configuration.Instance.GetUsers(&#8220;bob&#8221;);<br />charlie = Configuration.Instance.GetUsers(&#8220;charlie&#8221;);<br />diedre = Configuration.Instance.GetUsers(&#8220;diedre&#8221;);<br />&#8230;</p></blockquote>
<p>Even though this is a rather simple example of code duplication, I strongly believe even such minor infractions should be dealt with. Every line of the above code snippet knows how to obtain users from the configuration. This knowledge has to be read and maintained by developers. Instead, why not get all the &#8220;user getting&#8221; code into one place and let us simply write <span style="font-style: italic;">what </span>we want to do, instead of <span style="font-style: italic;">how</span>?</p>
<p>To solve this, I use one of these two techniques:</p>
<p><span style="font-weight: bold;">Extract Method, Tiger Style</span>
<ol>
<li>Choose a single instance of duplication, and locate any parameters or code that is <span style="font-weight: bold;">not</span> the same among all the instances of the duplicated code. In our examples, the username (and the assignment variable) are the only two different things between the four lines of code.</li>
<li>For every such parameter, use <span style="font-weight: bold;">Introduce Variable</span>. The end result of this phase should look something like this:<br />
<blockquote>string username = &#8220;alice&#8221;;<br />alice = Configuration.Instance.GetUsers(username);<br />bob = Configuration.Instance.GetUsers(&#8220;bob&#8221;);<br />charlie = Configuration.Instance.GetUsers(&#8220;charlie&#8221;);<br />diedre = Configuration.Instance.GetUsers(&#8220;diedre&#8221;);<br />&#8230;</p></blockquote>
</li>
<li> Now, use <span style="font-weight: bold;">Extract Method </span>on this code (the first line in our example). This creates a new method that I would call GetUsers, that simply gets a string argument username and reads it from the configuration.</li>
<li>Perform <span style="font-weight: bold;">Inline Variable</span> on the variable you created in step 1.</li>
<li>Now, change all the other instances to use this new method and delete the redundant code.</li>
</ol>
<p>The end result looks like this:<br />
<blockquote>alice = GetUsers(&#8220;alice&#8221;);<br />bob = GetUsers(&#8220;bob&#8221;);<br />charlie = GetUsers(&#8220;charlie&#8221;);<br />diedre = GetUsers(&#8220;diedre&#8221;);</p></blockquote>
<p>Another way to achieve the same refactoring is Crane Style (I&#8217;m just enjoying using kung-fu styles here because I saw Kung-Fu Panda not too long ago :). You can use  immediately without creating the temporary user, but then you get a method that specifically returns the username for &#8220;alice&#8221;, which is not what you wanted. Nevertheless, this method can be refactoring by applying <span style="font-weight: bold;">Extract Parameter</span> on &#8220;alice&#8221;, netting us the same result.</p>
<p>Of course these two examples do not begin to cover the myriad of ways you can and should refactor the code. What&#8217;s important is that you always keep an eye out on how you can make your code more concise, which in turns leads to readability and maintainability.</p>
<p><span style="font-size:130%;"><b>Tip III</b>: Code Cleanup</span></p>
<p>Resharper sprinkles colors to the right of your currently open file. Every such colored line is either a compilation error (for red lines), or a cleanup suggestion. Go over such suggestions and hear what Resharper has to say (in the example below it seems nobody is using the var xasdf, so a quick alt-Enter while standing on it will remove it).</p>
<p><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://1.bp.blogspot.com/_1o9kNEqekNI/SMWXlrhXLWI/AAAAAAAAAL0/uHfVoLWzJmU/s1600-h/resharper_color.png"><img style="cursor: pointer;" src="http://1.bp.blogspot.com/_1o9kNEqekNI/SMWXlrhXLWI/AAAAAAAAAL0/uHfVoLWzJmU/s400/resharper_color.png" alt="" id="BLOGGER_PHOTO_ID_5243764014736420194" border="0" /></a></p>
<p>Another thing which you should do is define and run <a href="http://msdn.microsoft.com/en-us/library/bb429476%28VS.80%29.aspx">FXCop</a><br />rules to perform a deeper analysis on your entire project/solution and spot potential problems.</p>
<h2>Source Control</h2>
<p><span style="font-size:130%;"><b>Tip IV</b> &#8211; Use Source Control</span></p>
<p>I almost left this out as this goes without saying, but properly using source control can probably save you more time and money than all the other tips (or cost you if you don&#8217;t use it). The best source control tool I know of for Visual Studio is of course <a href="http://en.wikipedia.org/wiki/Team_Foundation_Server">Team Foundation Server</a>, as it has the best integration with the IDE. <a href="http://subversion.tigris.org/">Other tools</a> are possible, but you have to have a good reason for choosing something other than TFS (One good reason might be cross-platform development and the desire to keep all your code base in a single repository).</p>
<h2>Automatic Unit Tests</h2>
<p>At <a href="http://www.delver.com/">Delver</a>, we use <a href="http://www.nunit.org/">NUnit</a> to write unit tests. In past projects I&#8217;ve used Visual Studio&#8217;s built in test tool, but I found NUn<br />
it to be slightly better, mainly due to the integration with Resharper. Resharper adds a small green button next to every test, and allows you to run your test directly from there instead of looking for the &#8220;Test View&#8221; window. <a href="http://tomergabel.com/">Tomer</a> told me just last week that he uses a keyboard shortcut for running tests, but for me, this is one shortcut I don&#8217;t think I&#8217;ll bother learning (the brain can only hole so much).<br />Another benefit of NUnit is that it runs the test suite in place in your current source folder, instead of copying everything aside to a separate folder like Visual Studio&#8217;s tool (this used to takes me gigs of space of old unit test sessions which were rarely if ever used).</p>
<p><span style="font-size:130%;"><b>Tip V</b> &#8211; Write Autonomous Unit Tests</span></p>
<p>Back to Joe, he has a few tests that don&#8217;t work right out of the box. Before running tests, he has to manually run a separate application used by his test suite. As his project contains hundreds of tests, I would love seeing this added as an automatic procedure in his TestInit() method. Automating a manual operation, besides saving time for developers, enables you to:</p>
<p><span style="font-size:130%;"><b>Tip VI</b> &#8211; Use Continuous Integration</span></p>
<p>Tests that nobody runs are no good. Tests that are run once when written and then forgotten are only slightly better. By the same logic, tests that run <span style="font-style: italic;">all the time</span> are the best. Pick and use a <a href="http://en.wikipedia.org/wiki/List_of_build_automation_software">Build Automation System</a>. I <a href="http://qimmortal.blogspot.com/2008/04/knuth-and-city-teamcity.html">wrote</a> <a href="http://qimmortal.blogspot.com/2008/06/some-more-on-teamcity.html">before</a> about our chosen solution, <a href="http://www.jetbrains.com/teamcity/">TeamCity</a>, and to sum it up &#8211; we&#8217;re extremely happy about it. TeamCity runs our tests on every commit, on multiple configurations and build agents, and helps us detect bugs faster.</p>
<h2>Know thy IDE</h2>
<p>Visual Studio is one powerful tool (not belittling java IDEs like IntelliJ and eclipse which in many cases are better). Learn how to use it&#8217;s features to your advantage:</p>
<p><span style="font-size:130%;"><b>Tip VII</b> &#8211; Edit And Continue</span></p>
<p>Suppose that while debugging, you found a bug. You can edit the code, save, and continue the debug session without losing the precious time you took getting to this point.</p>
<p><span style="font-size:130%;"><b>Tip VIII</b> &#8211; Move Execution Location</span></p>
<p>See the little yellow marker that signifies the current location inside the program being debugged? This arrow can be moved! It took me quite a while to discover this (actually heard about it from Sagie), but if you take and drag this arrow, Visual Studio will rewind or &#8220;fast forward&#8221; your execution to the desired point. None of the code gets executed, you just skip to where you want to go. Excellent for going back after executing a critical method, and rerunning it as many times as you wish.</p>
<p><span style="font-size:130%;"><b>Tip IX</b>&#8211; Use Conditional Breakpoints</span></p>
<p>Don&#8217;t waste your time waiting for some specific value to appear in the watch for an interesting variable &#8211; set your breakpoints to stop only when the desired conditions are met (right-click on the red breakpoint circle and choose &#8220;Condition&#8221;).</p>
<p><span style="font-size:130%;"><b>Tip X</b> &#8211; Attach to Process</span></p>
<p>Got a bug that only happens on production machines? You can attach your IDE to any running process (preferably one that is compiled in debug mode), and debug away. You can also programmatically cause a debugger to attach using System.Diagnostics.Debugger.Lau</p>
<p><span style="font-size:130%;"><b>Tip XI</b> &#8211; Use The Immediate Window</span></p>
<p>The Immediate window is a great tool for executing short code snippets solely for debugging. You can place a breakpoint inside a method you wish to debug, and then call the method directly from the immediate window (saves you from doing this through Edit And Continue)</p>
				</div>
		
				<div class="postmetadata">
					Tags: <a href="http://ripper234.com/tag/c/" rel="tag">C#</a>, <a href="http://ripper234.com/tag/programming/" rel="tag">Programming</a>, <a href="http://ripper234.com/tag/refactoring/" rel="tag">Refactoring</a>, <a href="http://ripper234.com/tag/resharper/" rel="tag">Resharper</a>, <a href="http://ripper234.com/tag/teamcity/" rel="tag">TeamCity</a>, <a href="http://ripper234.com/tag/visual-studio/" rel="tag">Visual Studio</a><br /><!--					Category: <a href="http://ripper234.com/p/category/uncategorized/" rel="category tag">Uncategorized</a>&nbsp;&nbsp;|&nbsp; !-->
					<a href="http://ripper234.com/p/11-tips-for-beginner-c-developers/#comments">1 Comment</a>									 </div>
			</div>
	
						
			<div class="post" id="post-673">
				<h2 class="posttitle"><a href="http://ripper234.com/p/regex-complexity/" rel="bookmark" title="Permanent Link to Regex Complexity">Regex Complexity</a></h2>
				<div class="postmetadata">10/8/08, 21:56 <!-- by ripper234 --></div>
				<div class="postentry">
					<div class="fblikebutton_button" style="margin-bottom: 10px; display: block;"><iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fripper234.com%2Fp%2Fregex-complexity%2F&amp;layout=standard&amp;show-faces=true&amp;width=450&amp;action=like&amp;colorscheme=light" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:450px; height:26px"></iframe></div>
<p>Today I got a shocker.</p>
<p>I tried the not-too-complicated regular expression:</p>
<table cellspacing="0" cellpadding="2" width="649" border="1">
<tbody>
<tr>
<td valign="top" width="647">
<p>href=[&#8216;&quot;](?&lt;link&gt;[^?&#8217;&quot;&gt;]*\??[^&#8217;&quot; &gt;]*)[^&gt;]*(?&lt;displayed&gt;[^&gt;]*)&lt;/a&gt;</p>
</td>
</tr>
</tbody>
</table>
</p>
</p>
<p>I worked in the excellent <a href="http://www.regexbuddy.com/">RegexBuddy</a>, and ran the above regex on a normal size HTML page (the regex aims to find all links in a page). The regex hung, and I got the following message:</p>
<table cellspacing="0" cellpadding="2" width="814" border="1">
<tbody>
<tr>
<td valign="top" width="812">The match attempt was aborted early because the regular expression is too complex.         <br />The regex engine you plan to use it with may not be able to handle it at all and crash.          <br />Look up &quot;catastrophic backtracking&quot; in the help file to learn how to avoid this situation.</td>
</tr>
</tbody>
</table>
<p>I looked up <a href="http://www.regular-expressions.info/catastrophic.html">catastrophic backtracking</a>, and got that regexes such as <tt>(x+x+)+y</tt> are evil. Sure  but my regex does not contain nested repetition operations!</p>
<p>I then tried this regex on a short page, and it worked. This was another surprise, as I always thought most regex implementations are compiled, and then <a href="http://en.wikipedia.org/wiki/Regular_expression#Implementations_and_running_times">run in O(n)</a> (I never took the time to learn all the regex flavors, I just assumed what I learned in the university was the general rule).</p>
<p>It turns out that one of the algorithms to implement regex uses backtracking, so a regex might work on a short string but fail on a larger one. It appears even simple expressions such as (a|aa)*b take <u>exponential time</u><strong> </strong>in this implementation.</p>
</p>
</p>
</p>
</p>
</p>
</p>
</p>
</p>
</p>
</p>
<p>I <a href="http://www.google.co.il/search?q=regex+.net+complexity&amp;ie=utf-8&amp;oe=utf-8&amp;aq=t&amp;rls=org.mozilla:en-US:official&amp;client=firefox-a">looked</a> <a href="http://www.google.co.il/search?q=regex+.net+performance&amp;ie=utf-8&amp;oe=utf-8&amp;aq=t&amp;rls=org.mozilla:en-US:official&amp;client=firefox-a">around</a> <a href="http://www.google.co.il/search?q=regex+.net+implementation&amp;ie=utf-8&amp;oe=utf-8&amp;aq=t&amp;rls=org.mozilla:en-US:official&amp;client=firefox-a">a bit</a>, but failed to find a good description of the internal implementation of .NETs regular expression engine.</p>
</p>
</p>
</p>
<p>BTW, the work-around I used here is modify the regex. Its not exactly what I aimed for, but its close enough:</p>
<table cellspacing="0" cellpadding="2" width="592" border="1">
<tbody>
<tr>
<td valign="top" width="590">
<p>href=[&#8216;&quot;](?&lt;link&gt;[^&#8217;&quot;&gt;]*)[^&gt;]*&gt;(?&lt;displayed&gt;[^&gt;]*)&lt;/a&gt;</p>
</td>
</tr>
</tbody>
</table>
				</div>
		
				<div class="postmetadata">
					Tags: <a href="http://ripper234.com/tag/net/" rel="tag">.net</a>, <a href="http://ripper234.com/tag/c/" rel="tag">C#</a>, <a href="http://ripper234.com/tag/programming/" rel="tag">Programming</a>, <a href="http://ripper234.com/tag/regular-expressions/" rel="tag">Regular Expressions</a><br /><!--					Category: <a href="http://ripper234.com/p/category/uncategorized/" rel="category tag">Uncategorized</a>&nbsp;&nbsp;|&nbsp; !-->
					<a href="http://ripper234.com/p/regex-complexity/#comments">9 Comments</a>									 </div>
			</div>
	
		
		<div class="navigation">
			<div class="alignleft"><a href="http://ripper234.com/tag/c/page/3/" >&laquo; Previous Entries</a></div>
			<div class="alignright"><a href="http://ripper234.com/tag/c/" >Next Entries &raquo;</a></div>
		</div>
		
	
	</div>
	<div id="sidebar">
		<ul>
			
			<li id="text-227228801" class="widget widget_text">			<div class="textwidget"><h2 class='title'>Subscribe</h2>
<div class='widget-content'>
<table border="0" cellpadding="5">
<tr>


<td>
<a href="http://feeds.feedburner.com/AQuantumImmortal"><img width="88px" height="26px" style="border:0" alt="" src="http://feeds.feedburner.com/~fc/AQuantumImmortal?bg=99CCFF&amp;fg=444444&amp;anim=0" /></a>
</td>
</tr>


<tr>


<td>
<a href="http://feeds.feedburner.com/AQuantumImmortal" rel="alternate" type="application/rss+xml">

<img alt="" style="vertical-align:middle;border:0" width="16px" height="16px" src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png"/>
</a>
<a href="http://feeds.feedburner.com/AQuantumImmortal" rel="alternate" type="application/rss+xml">
RSS
</a>
</td>



<td>
<a href="http://www.feedburner.com/fb/a/emailverifySubmit?feedId=1046632&loc=en_US">
<img height="16px" width="25px"
style="vertical-align:middle;border:0" src="http://dl.dropbox.com/u/464119/Blog/Icons/EmailEnvelope.png"/>
</a>
<a href="http://www.feedburner.com/fb/a/emailverifySubmit?feedId=1046632&loc=en_US" rel="alternate" type="application/rss+xml">
Email</a>
</td>
</tr>
</table>
</div></div>
		</li>
<li id="recent-comments-2" class="widget widget_recent_comments"><h2 class="widgettitle">Recent Comments</h2>
<ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link"><a href='http://ripper234.com/p/did-someone-just-hack-my-gmail/' rel='external nofollow' class='url'>A Quantum Immortal &raquo; Did someone just hack my gmail?</a></span> on <a href="http://ripper234.com/p/how-not-to-use-google-authenticator/comment-page-1/#comment-171073">How not to use Google Authenticator</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://ripper234.com/p/how-not-to-use-google-authenticator/' rel='external nofollow' class='url'>A Quantum Immortal &raquo; How not to use Google Authenticator</a></span> on <a href="http://ripper234.com/p/did-someone-just-hack-my-gmail/comment-page-1/#comment-171072">Did someone just hack my gmail?</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://Ponetium.WordPress.com' rel='external nofollow' class='url'>Ponetium</a></span> on <a href="http://ripper234.com/p/did-someone-just-hack-my-gmail/comment-page-1/#comment-171026">Did someone just hack my gmail?</a></li><li class="recentcomments"><span class="comment-author-link">Andrey</span> on <a href="http://ripper234.com/p/the-fractional-fractal/comment-page-1/#comment-170023">The Fractional Fractal</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://ripper234.pip.verisignlabs.com/' rel='external nofollow' class='url'>ripper234</a></span> on <a href="http://ripper234.com/p/my-awakening-satori/comment-page-1/#comment-169598">My Awakening Experiences AKA Satori</a></li></ul></li>
<li id="tag_cloud-2" class="widget widget_tag_cloud"><h2 class="widgettitle">Tags</h2>
<div class="tagcloud"><a href='http://ripper234.com/tag/net/' class='tag-link-321 tag-link-position-1' title='15 topics' style='font-size: 13.3944954128pt;'>.net</a>
<a href='http://ripper234.com/tag/algorithms/' class='tag-link-79 tag-link-position-2' title='6 topics' style='font-size: 8.89908256881pt;'>Algorithms</a>
<a href='http://ripper234.com/tag/aya/' class='tag-link-602 tag-link-position-3' title='7 topics' style='font-size: 9.54128440367pt;'>Aya</a>
<a href='http://ripper234.com/tag/biology/' class='tag-link-11 tag-link-position-4' title='8 topics' style='font-size: 10.1834862385pt;'>Biology</a>
<a href='http://ripper234.com/tag/bitcoin/' class='tag-link-487 tag-link-position-5' title='38 topics' style='font-size: 18.4036697248pt;'>bitcoin</a>
<a href='http://ripper234.com/tag/blogging/' class='tag-link-591 tag-link-position-6' title='19 topics' style='font-size: 14.6788990826pt;'>blogging</a>
<a href='http://ripper234.com/tag/c/' class='tag-link-42 tag-link-position-7' title='20 topics' style='font-size: 14.9357798165pt;'>C#</a>
<a href='http://ripper234.com/tag/career/' class='tag-link-475 tag-link-position-8' title='7 topics' style='font-size: 9.54128440367pt;'>Career</a>
<a href='http://ripper234.com/tag/computer-science/' class='tag-link-8 tag-link-position-9' title='16 topics' style='font-size: 13.7798165138pt;'>Computer Science</a>
<a href='http://ripper234.com/tag/cool/' class='tag-link-36 tag-link-position-10' title='6 topics' style='font-size: 8.89908256881pt;'>Cool</a>
<a href='http://ripper234.com/tag/delver/' class='tag-link-202 tag-link-position-11' title='8 topics' style='font-size: 10.1834862385pt;'>Delver</a>
<a href='http://ripper234.com/tag/draft/' class='tag-link-327 tag-link-position-12' title='14 topics' style='font-size: 13.1376146789pt;'>Draft</a>
<a href='http://ripper234.com/tag/evil/' class='tag-link-596 tag-link-position-13' title='6 topics' style='font-size: 8.89908256881pt;'>Evil</a>
<a href='http://ripper234.com/tag/facebook/' class='tag-link-114 tag-link-position-14' title='7 topics' style='font-size: 9.54128440367pt;'>Facebook</a>
<a href='http://ripper234.com/tag/gaming/' class='tag-link-592 tag-link-position-15' title='21 topics' style='font-size: 15.1926605505pt;'>Gaming</a>
<a href='http://ripper234.com/tag/good/' class='tag-link-143 tag-link-position-16' title='7 topics' style='font-size: 9.54128440367pt;'>Good</a>
<a href='http://ripper234.com/tag/google/' class='tag-link-597 tag-link-position-17' title='25 topics' style='font-size: 16.0917431193pt;'>Google</a>
<a href='http://ripper234.com/tag/humor/' class='tag-link-594 tag-link-position-18' title='46 topics' style='font-size: 19.4311926606pt;'>Humor</a>
<a href='http://ripper234.com/tag/java/' class='tag-link-268 tag-link-position-19' title='13 topics' style='font-size: 12.752293578pt;'>Java</a>
<a href='http://ripper234.com/tag/javascript/' class='tag-link-509 tag-link-position-20' title='8 topics' style='font-size: 10.1834862385pt;'>javascript</a>
<a href='http://ripper234.com/tag/magic/' class='tag-link-26 tag-link-position-21' title='26 topics' style='font-size: 16.3486238532pt;'>Magic</a>
<a href='http://ripper234.com/tag/mastercoin/' class='tag-link-535 tag-link-position-22' title='9 topics' style='font-size: 10.8256880734pt;'>MasterCoin</a>
<a href='http://ripper234.com/tag/microsoft/' class='tag-link-131 tag-link-position-23' title='5 topics' style='font-size: 8pt;'>Microsoft</a>
<a href='http://ripper234.com/tag/open-source/' class='tag-link-87 tag-link-position-24' title='9 topics' style='font-size: 10.8256880734pt;'>Open Source</a>
<a href='http://ripper234.com/tag/philosophy/' class='tag-link-224 tag-link-position-25' title='6 topics' style='font-size: 8.89908256881pt;'>Philosophy</a>
<a href='http://ripper234.com/tag/programming/' class='tag-link-21 tag-link-position-26' title='73 topics' style='font-size: 22pt;'>Programming</a>
<a href='http://ripper234.com/tag/project-euler/' class='tag-link-397 tag-link-position-27' title='6 topics' style='font-size: 8.89908256881pt;'>Project Euler</a>
<a href='http://ripper234.com/tag/resharper/' class='tag-link-280 tag-link-position-28' title='7 topics' style='font-size: 9.54128440367pt;'>Resharper</a>
<a href='http://ripper234.com/tag/rss/' class='tag-link-39 tag-link-position-29' title='8 topics' style='font-size: 10.1834862385pt;'>RSS</a>
<a href='http://ripper234.com/tag/science/' class='tag-link-593 tag-link-position-30' title='5 topics' style='font-size: 8pt;'>Science</a>
<a href='http://ripper234.com/tag/security/' class='tag-link-182 tag-link-position-31' title='8 topics' style='font-size: 10.1834862385pt;'>Security</a>
<a href='http://ripper234.com/tag/shards-of-alara/' class='tag-link-330 tag-link-position-32' title='6 topics' style='font-size: 8.89908256881pt;'>Shards of Alara</a>
<a href='http://ripper234.com/tag/spam/' class='tag-link-12 tag-link-position-33' title='6 topics' style='font-size: 8.89908256881pt;'>Spam</a>
<a href='http://ripper234.com/tag/stackoverflow/' class='tag-link-296 tag-link-position-34' title='11 topics' style='font-size: 11.8532110092pt;'>Stackoverflow</a>
<a href='http://ripper234.com/tag/starcraft/' class='tag-link-6 tag-link-position-35' title='6 topics' style='font-size: 8.89908256881pt;'>Starcraft</a>
<a href='http://ripper234.com/tag/startups/' class='tag-link-471 tag-link-position-36' title='9 topics' style='font-size: 10.8256880734pt;'>Startups</a>
<a href='http://ripper234.com/tag/stupid/' class='tag-link-66 tag-link-position-37' title='5 topics' style='font-size: 8pt;'>Stupid</a>
<a href='http://ripper234.com/tag/teamcity/' class='tag-link-254 tag-link-position-38' title='8 topics' style='font-size: 10.1834862385pt;'>TeamCity</a>
<a href='http://ripper234.com/tag/thesis/' class='tag-link-117 tag-link-position-39' title='6 topics' style='font-size: 8.89908256881pt;'>Thesis</a>
<a href='http://ripper234.com/tag/threading/' class='tag-link-294 tag-link-position-40' title='10 topics' style='font-size: 11.3394495413pt;'>Threading</a>
<a href='http://ripper234.com/tag/unit-testing/' class='tag-link-244 tag-link-position-41' title='8 topics' style='font-size: 10.1834862385pt;'>Unit Testing</a>
<a href='http://ripper234.com/tag/walkthrough/' class='tag-link-328 tag-link-position-42' title='8 topics' style='font-size: 10.1834862385pt;'>Walkthrough</a>
<a href='http://ripper234.com/tag/wikipedia/' class='tag-link-14 tag-link-position-43' title='9 topics' style='font-size: 10.8256880734pt;'>Wikipedia</a>
<a href='http://ripper234.com/tag/wordpress/' class='tag-link-3 tag-link-position-44' title='7 topics' style='font-size: 9.54128440367pt;'>wordpress</a>
<a href='http://ripper234.com/tag/xkcd/' class='tag-link-76 tag-link-position-45' title='5 topics' style='font-size: 8pt;'>xkcd</a></div>
</li>
<li id="archives-2" class="widget widget_archive"><h2 class="widgettitle">Archives</h2>
		<ul>
			<li><a href='http://ripper234.com/p/2015/11/'>November 2015</a>&nbsp;(1)</li>
	<li><a href='http://ripper234.com/p/2015/08/'>August 2015</a>&nbsp;(3)</li>
	<li><a href='http://ripper234.com/p/2015/07/'>July 2015</a>&nbsp;(2)</li>
	<li><a href='http://ripper234.com/p/2015/06/'>June 2015</a>&nbsp;(1)</li>
	<li><a href='http://ripper234.com/p/2015/04/'>April 2015</a>&nbsp;(1)</li>
	<li><a href='http://ripper234.com/p/2015/03/'>March 2015</a>&nbsp;(1)</li>
	<li><a href='http://ripper234.com/p/2015/01/'>January 2015</a>&nbsp;(2)</li>
	<li><a href='http://ripper234.com/p/2014/12/'>December 2014</a>&nbsp;(2)</li>
	<li><a href='http://ripper234.com/p/2014/11/'>November 2014</a>&nbsp;(7)</li>
	<li><a href='http://ripper234.com/p/2014/10/'>October 2014</a>&nbsp;(1)</li>
	<li><a href='http://ripper234.com/p/2014/09/'>September 2014</a>&nbsp;(6)</li>
	<li><a href='http://ripper234.com/p/2014/08/'>August 2014</a>&nbsp;(1)</li>
	<li><a href='http://ripper234.com/p/2014/06/'>June 2014</a>&nbsp;(5)</li>
	<li><a href='http://ripper234.com/p/2014/05/'>May 2014</a>&nbsp;(1)</li>
	<li><a href='http://ripper234.com/p/2014/04/'>April 2014</a>&nbsp;(7)</li>
	<li><a href='http://ripper234.com/p/2014/02/'>February 2014</a>&nbsp;(2)</li>
	<li><a href='http://ripper234.com/p/2014/01/'>January 2014</a>&nbsp;(2)</li>
	<li><a href='http://ripper234.com/p/2013/12/'>December 2013</a>&nbsp;(2)</li>
	<li><a href='http://ripper234.com/p/2013/11/'>November 2013</a>&nbsp;(13)</li>
	<li><a href='http://ripper234.com/p/2013/10/'>October 2013</a>&nbsp;(5)</li>
	<li><a href='http://ripper234.com/p/2013/09/'>September 2013</a>&nbsp;(2)</li>
	<li><a href='http://ripper234.com/p/2013/08/'>August 2013</a>&nbsp;(12)</li>
	<li><a href='http://ripper234.com/p/2013/07/'>July 2013</a>&nbsp;(1)</li>
	<li><a href='http://ripper234.com/p/2013/03/'>March 2013</a>&nbsp;(1)</li>
	<li><a href='http://ripper234.com/p/2013/01/'>January 2013</a>&nbsp;(3)</li>
	<li><a href='http://ripper234.com/p/2012/12/'>December 2012</a>&nbsp;(2)</li>
	<li><a href='http://ripper234.com/p/2012/11/'>November 2012</a>&nbsp;(2)</li>
	<li><a href='http://ripper234.com/p/2012/10/'>October 2012</a>&nbsp;(1)</li>
	<li><a href='http://ripper234.com/p/2012/09/'>September 2012</a>&nbsp;(1)</li>
	<li><a href='http://ripper234.com/p/2012/08/'>August 2012</a>&nbsp;(3)</li>
	<li><a href='http://ripper234.com/p/2012/07/'>July 2012</a>&nbsp;(4)</li>
	<li><a href='http://ripper234.com/p/2012/06/'>June 2012</a>&nbsp;(2)</li>
	<li><a href='http://ripper234.com/p/2012/05/'>May 2012</a>&nbsp;(3)</li>
	<li><a href='http://ripper234.com/p/2012/04/'>April 2012</a>&nbsp;(4)</li>
	<li><a href='http://ripper234.com/p/2012/03/'>March 2012</a>&nbsp;(2)</li>
	<li><a href='http://ripper234.com/p/2012/02/'>February 2012</a>&nbsp;(1)</li>
	<li><a href='http://ripper234.com/p/2012/01/'>January 2012</a>&nbsp;(3)</li>
	<li><a href='http://ripper234.com/p/2011/12/'>December 2011</a>&nbsp;(2)</li>
	<li><a href='http://ripper234.com/p/2011/11/'>November 2011</a>&nbsp;(1)</li>
	<li><a href='http://ripper234.com/p/2011/10/'>October 2011</a>&nbsp;(4)</li>
	<li><a href='http://ripper234.com/p/2011/09/'>September 2011</a>&nbsp;(4)</li>
	<li><a href='http://ripper234.com/p/2011/08/'>August 2011</a>&nbsp;(1)</li>
	<li><a href='http://ripper234.com/p/2011/07/'>July 2011</a>&nbsp;(1)</li>
	<li><a href='http://ripper234.com/p/2011/06/'>June 2011</a>&nbsp;(5)</li>
	<li><a href='http://ripper234.com/p/2011/05/'>May 2011</a>&nbsp;(4)</li>
	<li><a href='http://ripper234.com/p/2011/04/'>April 2011</a>&nbsp;(5)</li>
	<li><a href='http://ripper234.com/p/2011/03/'>March 2011</a>&nbsp;(10)</li>
	<li><a href='http://ripper234.com/p/2011/02/'>February 2011</a>&nbsp;(3)</li>
	<li><a href='http://ripper234.com/p/2010/12/'>December 2010</a>&nbsp;(3)</li>
	<li><a href='http://ripper234.com/p/2010/11/'>November 2010</a>&nbsp;(1)</li>
	<li><a href='http://ripper234.com/p/2010/07/'>July 2010</a>&nbsp;(2)</li>
	<li><a href='http://ripper234.com/p/2010/06/'>June 2010</a>&nbsp;(3)</li>
	<li><a href='http://ripper234.com/p/2010/05/'>May 2010</a>&nbsp;(3)</li>
	<li><a href='http://ripper234.com/p/2010/04/'>April 2010</a>&nbsp;(3)</li>
	<li><a href='http://ripper234.com/p/2010/02/'>February 2010</a>&nbsp;(1)</li>
	<li><a href='http://ripper234.com/p/2010/01/'>January 2010</a>&nbsp;(3)</li>
	<li><a href='http://ripper234.com/p/2009/11/'>November 2009</a>&nbsp;(1)</li>
	<li><a href='http://ripper234.com/p/2009/10/'>October 2009</a>&nbsp;(6)</li>
	<li><a href='http://ripper234.com/p/2009/09/'>September 2009</a>&nbsp;(2)</li>
	<li><a href='http://ripper234.com/p/2009/08/'>August 2009</a>&nbsp;(5)</li>
	<li><a href='http://ripper234.com/p/2009/07/'>July 2009</a>&nbsp;(5)</li>
	<li><a href='http://ripper234.com/p/2009/06/'>June 2009</a>&nbsp;(2)</li>
	<li><a href='http://ripper234.com/p/2009/05/'>May 2009</a>&nbsp;(3)</li>
	<li><a href='http://ripper234.com/p/2009/04/'>April 2009</a>&nbsp;(3)</li>
	<li><a href='http://ripper234.com/p/2009/03/'>March 2009</a>&nbsp;(10)</li>
	<li><a href='http://ripper234.com/p/2009/02/'>February 2009</a>&nbsp;(6)</li>
	<li><a href='http://ripper234.com/p/2009/01/'>January 2009</a>&nbsp;(6)</li>
	<li><a href='http://ripper234.com/p/2008/12/'>December 2008</a>&nbsp;(11)</li>
	<li><a href='http://ripper234.com/p/2008/11/'>November 2008</a>&nbsp;(12)</li>
	<li><a href='http://ripper234.com/p/2008/10/'>October 2008</a>&nbsp;(6)</li>
	<li><a href='http://ripper234.com/p/2008/09/'>September 2008</a>&nbsp;(7)</li>
	<li><a href='http://ripper234.com/p/2008/08/'>August 2008</a>&nbsp;(8)</li>
	<li><a href='http://ripper234.com/p/2008/07/'>July 2008</a>&nbsp;(5)</li>
	<li><a href='http://ripper234.com/p/2008/06/'>June 2008</a>&nbsp;(4)</li>
	<li><a href='http://ripper234.com/p/2008/05/'>May 2008</a>&nbsp;(7)</li>
	<li><a href='http://ripper234.com/p/2008/04/'>April 2008</a>&nbsp;(6)</li>
	<li><a href='http://ripper234.com/p/2008/03/'>March 2008</a>&nbsp;(19)</li>
	<li><a href='http://ripper234.com/p/2008/02/'>February 2008</a>&nbsp;(29)</li>
	<li><a href='http://ripper234.com/p/2008/01/'>January 2008</a>&nbsp;(6)</li>
	<li><a href='http://ripper234.com/p/2007/12/'>December 2007</a>&nbsp;(16)</li>
	<li><a href='http://ripper234.com/p/2007/11/'>November 2007</a>&nbsp;(17)</li>
	<li><a href='http://ripper234.com/p/2007/10/'>October 2007</a>&nbsp;(13)</li>
	<li><a href='http://ripper234.com/p/2007/09/'>September 2007</a>&nbsp;(14)</li>
	<li><a href='http://ripper234.com/p/2007/08/'>August 2007</a>&nbsp;(22)</li>
	<li><a href='http://ripper234.com/p/2007/07/'>July 2007</a>&nbsp;(12)</li>
		</ul>
		</li>
<li id="linkcat-2" class="widget widget_links"><h2 class="widgettitle">Blogroll</h2>

	<ul class='xoxo blogroll'>
<li><a href="http://blogs.jetbrains.com/dotnet/">JebBrains .NET</a></li>
<li><a href="http://slashdot.org/">SlashDot</a></li>

	</ul>
</li>

<li id="linkcat-103" class="widget widget_links"><h2 class="widgettitle">Comics</h2>

	<ul class='xoxo blogroll'>
<li><a href="http://www.phdcomics.com/">Phd Comics</a></li>
<li><a href="http://www.xkcd.com/">xkcd</a></li>

	</ul>
</li>

<li id="linkcat-422" class="widget widget_links"><h2 class="widgettitle">Develpment</h2>

	<ul class='xoxo blogroll'>
<li><a href="http://blogs.msdn.com/bclteam/">BCL</a></li>
<li><a href="http://blogs.msdn.com/clrteam/">CLR</a></li>
<li><a href="http://www.facebook.com/notes.php?id=9445547199">Facebook Dev</a></li>
<li><a href="http://highscalability.com/">High Scalability</a></li>
<li><a href="http://www.bluebytesoftware.com/blog/">Joe Duffy</a></li>
<li><a href="http://www.joelonsoftware.com/">Joel Spolksy</a></li>
<li><a href="http://msmvps.com/blogs/jon_skeet/">Jon Skeet</a></li>
<li><a href="http://top-performance.blogspot.com/" rel="contact met">Moshe Kaplan</a></li>
<li><a href="http://blogs.msdn.com/pfxteam/">Parallel Extension</a></li>
<li><a href="http://resharper.blogspot.com/">Resharper</a></li>
<li><a href="http://www.hanselman.com/blog/">Scott Hanselman</a></li>
<li><a href="http://blog.stackoverflow.com/">StackOverflow</a></li>

	</ul>
</li>

<li id="linkcat-423" class="widget widget_links"><h2 class="widgettitle">Friends</h2>

	<ul class='xoxo blogroll'>
<li><a href="http://blogs.microsoft.co.il/blogs/alon/" rel="met">Alon Fliess</a></li>
<li><a href="http://eli.thegreenplace.net/" rel="friend met">Eli Bendersky</a></li>
<li><a href="http://pilaheleg.blogli.co.il/" rel="friend met">Hila Peleg</a></li>
<li><a href="http://idanz.blogli.co.il/" rel="friend met">Idan Zeirman</a></li>
<li><a href="http://ilyadoc.blogspot.com/" rel="friend met">Ilya Konstantinov</a></li>
<li><a href="http://ilyadoc.blogspot.com/" rel="met">Ilya Konstantinov</a></li>
<li><a href="http://www.algorithm.co.il/" rel="friend met">Imri Goldberg</a></li>
<li><a href="http://www.kenegozi.com/blog/" rel="friend met">Ken Egozi</a></li>
<li><a href="http://blog.karmona.com/" rel="met co-worker">Moti Karmona</a></li>
<li><a href="http://alteregozi.com/feed/" rel="friend met">Ofer Egozi</a></li>
<li><a href="http://omriqa.blogspot.com/" rel="met co-worker">Omri Lapidot</a></li>
<li><a href="http://www.lnbogen.com/" rel="friend met">Oren Ellenbogen</a></li>
<li><a href="http://blog.shlomoid.com/" rel="friend met">Shlomo Priymak</a></li>
<li><a href="http://www.tomergabel.com/" rel="met">Tomer Gabel</a></li>
<li><a href="http://ponetium.wordpress.com/" rel="friend">   </a></li>

	</ul>
</li>

		</ul>
	</div>

</div> <!-- wrapper -->
<div id="footer">
	<a href="http://ripper234.com/feed/">Entries (RSS)</a> and <a href="http://ripper234.com/comments/feed/">Comments (RSS)</a>. Valid <a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional"><abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a> and <a href="http://jigsaw.w3.org/css-validator/check/referer"><abbr title="Cascading Style Sheets">CSS</abbr></a>.<br />
	Powered by <a href="http://wordpress.org/" title="Powered by WordPress.">WordPress</a> and <a href="http://srinig.com/wordpress/themes/fluid-blue/">Fluid Blue theme</a>.<br />
	<!-- 42 queries. 0.570 seconds. -->
	<script type='text/javascript' src='http://platform.twitter.com/widgets.js'></script>	<script type="text/javascript">
	  window.___gcfg = {lang: 'en'};
	
	  (function() {
	    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
	    po.src = 'https://apis.google.com/js/plusone.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
	  })();
	</script><script type='text/javascript'>
/* <![CDATA[ */
var ratingsL10n = {"plugin_url":"http:\/\/ripper234.com\/wp-content\/plugins\/wp-postratings","ajax_url":"http:\/\/ripper234.com\/wp-admin\/admin-ajax.php","text_wait":"Please rate only 1 post at a time.","image":"squares","image_ext":"gif","max":"5","show_loading":"1","show_fading":"1","custom":"0"};
var ratings_mouseover_image=new Image();ratings_mouseover_image.src=ratingsL10n.plugin_url+"/images/"+ratingsL10n.image+"/rating_over."+ratingsL10n.image_ext;;
/* ]]> */
</script>
<script type='text/javascript' src='http://ripper234.wpengine.netdna-cdn.com/wp-content/plugins/wp-postratings/postratings-js.js?ver=1.63'></script>
<script type='text/javascript' src='http://ripper234.wpengine.netdna-cdn.com/wp-includes/js/wp-embed.min.js?ver=4.5.3'></script>

<div id="fb-root"></div>
<script type="text/javascript">
  window.fbAsyncInit = function() {
    FB.init({"appId":"125818707482670","channelUrl":"http:\/\/ripper234.com\/?sfc-channel-file=1","status":true,"cookie":true,"xfbml":true,"oauth":true});
    
  };
  (function(d){
       var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       d.getElementsByTagName('head')[0].appendChild(js);
   }(document));     
</script>
</div>
</div> <!-- page -->
</body>
</html>
